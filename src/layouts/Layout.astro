---
import '../styles/global.css'
---

<!doctype html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>Humberto Lopez Portfolio</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Space+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body class="cursor-pixel">
    <!-- Loading Screen -->
    <div
      id="loading-screen"
      class="fixed inset-0 bg-slate-950 z-100 flex items-center justify-center"
    >
      <div class="text-center">
        <div
          class="w-16 h-16 md:w-20 md:h-20 bg-linear-to-br from-blue-500 to-cyan-400 border-3 md:border-4 border-cyan-600 mx-auto mb-6 pulse-glow relative"
        >
          <div class="absolute inset-0 pixel-grid opacity-30"></div>
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="w-6 h-6 md:w-8 md:h-8 bg-cyan-300 border-2 border-blue-900"></div>
          </div>
        </div>
        <p class="pixel-font text-cyan-400 text-xs md:text-sm mb-4">LOADING...</p>
        <div
          class="w-48 md:w-64 h-6 bg-slate-900 border-2 md:border-3 border-blue-500 mx-auto overflow-hidden"
        >
          <div
            id="loading-bar"
            class="h-full bg-linear-to-r from-blue-500 via-cyan-400 to-blue-500 w-0 transition-all duration-300"
          >
          </div>
        </div>
      </div>
    </div>

    <slot />

    <!-- Scroll to Top Button -->
    <button
      id="scroll-to-top"
      class="fixed bottom-8 right-8 w-12 h-12 bg-cyan-400 border-3 border-cyan-600 hover:bg-cyan-300 transition-all pixel-border opacity-0 pointer-events-none z-50 flex items-center justify-center"
      style="box-shadow: 0 4px 12px rgba(6, 182, 212, 0.4);"
      aria-label="Scroll to top"
    >
      <span class="text-slate-950 text-xl font-bold">â†‘</span>
    </button>
  </body>
</html>

<style is:global>
  /* Color Palette - Blue Gaming Theme */
  :root {
    --color-dark-blue: #0f172a;
    --color-navy: #1e293b;
    --color-blue-electric: #3b82f6;
    --color-blue-bright: #60a5fa;
    --color-cyan: #06b6d4;
    --color-cyan-light: #22d3ee;
    --color-accent: #a855f7;
    --color-success: #10b981;
    --color-warning: #f59e0b;
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  @keyframes pulse-glow {
    0%,
    100% {
      box-shadow: 0 0 5px var(--color-blue-electric);
    }
    50% {
      box-shadow:
        0 0 20px var(--color-blue-bright),
        0 0 30px var(--color-cyan);
    }
  }

  @keyframes pixel-scan {
    0% {
      background-position: 0 0;
    }
    100% {
      background-position: 0 100%;
    }
  }

  @keyframes blink {
    0%,
    50%,
    100% {
      opacity: 1;
    }
    25%,
    75% {
      opacity: 0;
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Smooth scroll behavior */
  html {
    scroll-behavior: smooth;
  }

  /* Custom cursor (optional - pixel style) */
  .cursor-pixel {
    cursor: default;
  }

  .cursor-pixel a,
  .cursor-pixel button {
    cursor: pointer;
  }

  .pixel-font {
    font-family: 'Press Start 2P', cursive;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: none;
  }

  .mono-font {
    font-family: 'Space Mono', monospace;
  }

  .floating {
    animation: float 3s ease-in-out infinite;
  }

  .pulse-glow {
    animation: pulse-glow 2s ease-in-out infinite;
  }

  .blink {
    animation: blink 1.5s step-end infinite;
  }

  /* Fade in on scroll animation */
  .fade-in {
    animation: fadeIn 0.8s ease-out forwards;
  }

  .slide-in-left {
    animation: slideInLeft 0.8s ease-out forwards;
  }

  .slide-in-right {
    animation: slideInRight 0.8s ease-out forwards;
  }

  /* Scroll to top button transitions */
  #scroll-to-top.show {
    opacity: 1;
    pointer-events: auto;
  }

  #scroll-to-top {
    transition:
      opacity 0.3s ease,
      transform 0.2s ease;
  }

  #scroll-to-top:hover {
    transform: scale(1.1);
  }

  #scroll-to-top:active {
    transform: scale(0.95);
  }

  /* Enhanced transitions for interactive elements */
  a,
  button,
  input,
  textarea {
    transition: all 0.3s ease;
  }

  /* Improve focus states for accessibility */
  a:focus-visible,
  button:focus-visible,
  input:focus-visible,
  textarea:focus-visible {
    outline: 3px solid var(--color-cyan);
    outline-offset: 2px;
  }

  /* Card hover improvements */
  [class*='border-3']:hover,
  [class*='border-2']:hover {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Smooth opacity transitions */
  .fade-in {
    opacity: 0;
  }

  /* Loading state */
  @keyframes shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  .loading-shimmer {
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(6, 182, 212, 0.1) 50%,
      transparent 100%
    );
    background-size: 1000px 100%;
    animation: shimmer 2s infinite;
  }

  /* Tooltip styles */
  [data-tooltip] {
    position: relative;
  }

  [data-tooltip]:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%) translateY(-8px);
    background: var(--color-slate-900);
    color: var(--color-cyan);
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    z-index: 1000;
    border: 2px solid var(--color-cyan);
    font-family: 'Space Mono', monospace;
  }

  [data-tooltip]:hover::before {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-top-color: var(--color-cyan);
    z-index: 1000;
  }

  /* Improved link underlines */
  a:not(.pixel-button) {
    position: relative;
  }

  a:not(.pixel-button):hover {
    color: var(--color-cyan-light);
  }

  /* Selection styling */
  ::selection {
    background: var(--color-cyan);
    color: var(--color-dark-blue);
  }

  ::-moz-selection {
    background: var(--color-cyan);
    color: var(--color-dark-blue);
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 12px;
  }

  ::-webkit-scrollbar-track {
    background: var(--color-dark-blue);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--color-blue-electric);
    border: 2px solid var(--color-dark-blue);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--color-cyan);
  }

  /* Reduce motion for accessibility */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  .notebook-holes-top {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: space-evenly;
    padding: 0 40px;
  }

  .spiral-ring {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #5a6a7d, #2d3748);
    box-shadow:
      inset -2px -2px 4px rgba(0, 0, 0, 0.4),
      inset 2px 2px 4px rgba(255, 255, 255, 0.1),
      0 2px 4px rgba(0, 0, 0, 0.3);
    border: 2px solid #1a202c;
  }

  .notebook-holes {
    /* Kept for compatibility */
  }

  .grid-paper {
    background-color: #dbeafe;
    background-image:
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 19px,
        rgba(59, 130, 246, 0.08) 19px,
        rgba(59, 130, 246, 0.08) 20px
      ),
      repeating-linear-gradient(
        90deg,
        transparent,
        transparent 19px,
        rgba(59, 130, 246, 0.08) 19px,
        rgba(59, 130, 246, 0.08) 20px
      );
  }

  .pixel-grid {
    background-image:
      linear-gradient(rgba(59, 130, 246, 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(59, 130, 246, 0.03) 1px, transparent 1px);
    background-size: 8px 8px;
  }

  .notebook-line {
    border-left: 2px solid #60a5fa;
    position: relative;
  }

  .pixel-border {
    border: 3px solid var(--color-blue-electric);
    box-shadow:
      0 0 0 1px var(--color-dark-blue),
      0 0 20px rgba(59, 130, 246, 0.3);
    image-rendering: pixelated;
  }

  .pixel-button {
    border: 3px solid var(--color-blue-electric);
    background: var(--color-navy);
    color: var(--color-cyan-light);
    padding: 12px 24px;
    font-family: 'Press Start 2P', cursive;
    font-size: 10px;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.1s ease;
    box-shadow:
      4px 4px 0 var(--color-blue-electric),
      0 0 20px rgba(59, 130, 246, 0.2);
  }

  .pixel-button:hover {
    transform: translate(2px, 2px);
    box-shadow:
      2px 2px 0 var(--color-blue-electric),
      0 0 30px rgba(59, 130, 246, 0.5);
  }

  .pixel-button:active {
    transform: translate(4px, 4px);
    box-shadow: none;
  }

  .post-it {
    box-shadow:
      0 1px 3px rgba(0, 0, 0, 0.12),
      0 1px 2px rgba(0, 0, 0, 0.08),
      0 8px 16px rgba(0, 0, 0, 0.15);
    position: relative;
  }

  .post-it::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 12px;
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.05) 0%, transparent 100%);
  }

  .tape {
    background: linear-gradient(
      135deg,
      rgba(251, 191, 36, 0.15) 0%,
      rgba(251, 191, 36, 0.25) 50%,
      rgba(251, 191, 36, 0.15) 100%
    );
    border: 2px dashed rgba(251, 191, 36, 0.3);
    box-shadow:
      inset 0 1px 2px rgba(255, 255, 255, 0.4),
      0 2px 4px rgba(0, 0, 0, 0.1);
    position: relative;
  }

  .tape::before {
    content: '';
    position: absolute;
    inset: 2px;
    background: repeating-linear-gradient(
      45deg,
      transparent,
      transparent 4px,
      rgba(251, 191, 36, 0.05) 4px,
      rgba(251, 191, 36, 0.05) 8px
    );
  }

  .pixel-border {
    box-shadow:
      0 0 0 3px #3b82f6,
      6px 6px 0 0 rgba(59, 130, 246, 0.3);
  }

  .notebook-shadow {
    box-shadow:
      0 20px 60px rgba(0, 0, 0, 0.3),
      0 0 0 1px rgba(0, 0, 0, 0.05),
      inset 0 1px 0 rgba(255, 255, 255, 0.8);
  }

  .sticker-shadow {
    box-shadow:
      0 4px 12px rgba(59, 130, 246, 0.4),
      0 2px 4px rgba(0, 0, 0, 0.2);
  }

  /* Gaming Stats/Progress Bars */
  .stat-bar {
    height: 24px;
    background: var(--color-dark-blue);
    border: 3px solid var(--color-blue-electric);
    position: relative;
    overflow: hidden;
    image-rendering: pixelated;
  }

  .stat-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--color-blue-electric) 0%, var(--color-cyan) 100%);
    position: relative;
    transition: width 1s ease-out;
  }

  .stat-bar-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 8px;
    background: linear-gradient(to bottom, rgba(255, 255, 255, 0.4), transparent);
  }

  .stat-bar-fill.animate {
    animation: pixel-scan 2s linear infinite;
    background-image: linear-gradient(
      90deg,
      var(--color-blue-electric) 0%,
      var(--color-cyan) 50%,
      var(--color-blue-electric) 100%
    );
    background-size: 200% 100%;
  }

  /* Level Badge */
  .level-badge {
    background: var(--color-blue-electric);
    border: 3px solid var(--color-dark-blue);
    box-shadow:
      0 0 0 3px var(--color-blue-electric),
      0 4px 0 var(--color-dark-blue),
      0 0 20px rgba(59, 130, 246, 0.5);
    padding: 8px 16px;
    font-family: 'Press Start 2P', cursive;
    font-size: 10px;
    color: white;
    text-shadow: 2px 2px 0 var(--color-dark-blue);
  }

  .pin {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #ef4444, #991b1b);
    box-shadow:
      0 2px 4px rgba(0, 0, 0, 0.3),
      inset -1px -1px 2px rgba(0, 0, 0, 0.3),
      inset 1px 1px 2px rgba(255, 255, 255, 0.3);
    position: relative;
  }

  .pin::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.6);
  }

  .paper-clip {
    width: 40px;
    height: 60px;
    border: 3px solid #64748b;
    border-radius: 20px 20px 8px 8px;
    border-bottom: none;
    position: absolute;
    transform: rotate(15deg);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }

  .hand-drawn-arrow {
    stroke: #60a5fa;
    stroke-width: 3;
    fill: none;
    stroke-linecap: round;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
  }

  .tab {
    writing-mode: vertical-lr;
    transform: rotate(180deg);
    box-shadow:
      -2px 0 4px rgba(0, 0, 0, 0.1),
      inset 1px 0 0 rgba(255, 255, 255, 0.5);
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .tab:hover {
    transform: rotate(180deg) translateX(-4px);
    box-shadow:
      -4px 0 8px rgba(0, 0, 0, 0.15),
      inset 1px 0 0 rgba(255, 255, 255, 0.5);
  }
  html,
  body {
    margin: 0;
    width: 100%;
    height: 100%;
  }
</style>

<script>
  // Loading Screen
  const loadingScreen = document.getElementById('loading-screen') as HTMLElement | null
  const loadingBar = document.getElementById('loading-bar') as HTMLElement | null

  // Simulate loading progress
  let progress = 0
  const loadingInterval = setInterval(() => {
    progress += Math.random() * 30
    if (progress >= 100) {
      progress = 100
      clearInterval(loadingInterval)
    }
    if (loadingBar) {
      loadingBar.style.width = progress + '%'
    }
  }, 100)

  // Hide loading screen when page is fully loaded
  window.addEventListener('load', () => {
    setTimeout(() => {
      if (loadingScreen) {
        loadingScreen.style.opacity = '0'
        loadingScreen.style.transition = 'opacity 0.5s ease'
        setTimeout(() => {
          loadingScreen.style.display = 'none'
        }, 500)
      }
    }, 500)
  })

  // Scroll to Top Button
  const scrollToTopBtn = document.getElementById('scroll-to-top')

  if (scrollToTopBtn) {
    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) {
        scrollToTopBtn.classList.add('show')
      } else {
        scrollToTopBtn.classList.remove('show')
      }
    })

    scrollToTopBtn.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth',
      })
    })
  }

  // Intersection Observer for fade-in animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px',
  }

  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('fade-in')
        observer.unobserve(entry.target)
      }
    })
  }, observerOptions)

  // Observe sections for fade-in effect
  document.addEventListener('DOMContentLoaded', () => {
    const sections = document.querySelectorAll('section')
    sections.forEach(section => {
      observer.observe(section)
    })

    // Observe project cards
    const projectCards = document.querySelectorAll(
      '[class*="bg-blue-950"], [class*="bg-slate-900"], [class*="bg-purple-950"], [class*="bg-emerald-950"], [class*="bg-orange-950"]'
    )
    projectCards.forEach((card, index) => {
      ;(card as HTMLElement).style.opacity = '0'
      setTimeout(() => {
        observer.observe(card)
      }, index * 50)
    })
  })

  // Smooth scroll for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      const href = anchor.getAttribute('href')
      if (href && href !== '#' && href.length > 1) {
        e.preventDefault()
        const target = document.querySelector(href)
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start',
          })
        }
      }
    })
  })

  // Add pixel-perfect hover effects to buttons
  const buttons = document.querySelectorAll('.pixel-button')
  buttons.forEach(button => {
    const btn = button as HTMLElement
    btn.addEventListener('mouseenter', () => {
      btn.style.transform = 'translate(-2px, -2px)'
    })
    btn.addEventListener('mouseleave', () => {
      btn.style.transform = 'translate(0, 0)'
    })
  })
</script>
